<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-ClassRoom</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.24.7/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
<script type="text/babel">
const { useState, useEffect } = React;

const App = () => {
    const [userType, setUserType] = useState(null);
    const [currentUser, setCurrentUser] = useState(null);
    const [teachers, setTeachers] = useState([]);
    const [students, setStudents] = useState([]);
    const [courses, setCourses] = useState([]);
    const [assignments, setAssignments] = useState([]);
    const [announcements, setAnnouncements] = useState([]);
    const [submissions, setSubmissions] = useState([]);
    const [nextAssignmentId, setNextAssignmentId] = useState(1);
    const [nextAnnouncementId, setNextAnnouncementId] = useState(1);
    const [nextSubmissionId, setNextSubmissionId] = useState(1);

    useEffect(() => {
        // Load data from localStorage on mount
        const storedTeachers = JSON.parse(localStorage.getItem('teachers') || '[]');
        const storedStudents = JSON.parse(localStorage.getItem('students') || '[]');
        const storedCourses = JSON.parse(localStorage.getItem('courses') || '[]');
        const storedAssignments = JSON.parse(localStorage.getItem('assignments') || '[]');
        const storedAnnouncements = JSON.parse(localStorage.getItem('announcements') || '[]');
        const storedSubmissions = JSON.parse(localStorage.getItem('submissions') || '[]');
        const storedNextAssignmentId = JSON.parse(localStorage.getItem('nextAssignmentId') || '1');
        const storedNextAnnouncementId = JSON.parse(localStorage.getItem('nextAnnouncementId') || '1');
        const storedNextSubmissionId = JSON.parse(localStorage.getItem('nextSubmissionId') || '1');

        setTeachers(storedTeachers);
        setStudents(storedStudents);
        setCourses(storedCourses);
        setAssignments(storedAssignments);
        setAnnouncements(storedAnnouncements);
        setSubmissions(storedSubmissions);
        setNextAssignmentId(storedNextAssignmentId);
        setNextAnnouncementId(storedNextAnnouncementId);
        setNextSubmissionId(storedNextSubmissionId);
    }, []);

    useEffect(() => {
        // Save data to localStorage whenever state changes
        localStorage.setItem('teachers', JSON.stringify(teachers));
        localStorage.setItem('students', JSON.stringify(students));
        localStorage.setItem('courses', JSON.stringify(courses));
        localStorage.setItem('assignments', JSON.stringify(assignments));
        localStorage.setItem('announcements', JSON.stringify(announcements));
        localStorage.setItem('submissions', JSON.stringify(submissions));
        localStorage.setItem('nextAssignmentId', JSON.stringify(nextAssignmentId));
        localStorage.setItem('nextAnnouncementId', JSON.stringify(nextAnnouncementId));
        localStorage.setItem('nextSubmissionId', JSON.stringify(nextSubmissionId));
    }, [teachers, students, courses, assignments, announcements, submissions, nextAssignmentId, nextAnnouncementId, nextSubmissionId]);

    const handleRegisterTeacher = (name, email, password) => {
        setTeachers([...teachers, { name, email, password, myCourseIds: [] }]);
        alert('Teacher registered successfully!');
    };

    const handleRegisterStudent = (name, email, password, id) => {
        setStudents([...students, { name, email, password, stId: id, enrolledCourseIds: [] }]);
        alert('Student registered successfully!');
    };

    const handleLoginTeacher = (email, password) => {
        const teacher = teachers.find(t => t.email === email && t.password === password);
        if (teacher) {
            setCurrentUser({ ...teacher, type: 'teacher' });
            alert('Teacher login successful!');
        } else {
            alert('Login failed!');
        }
    };

    const handleLoginStudent = (email, password) => {
        const student = students.find(s => s.email === email && s.password === password);
        if (student) {
            setCurrentUser({ ...student, type: 'student' });
            alert('Student login successful!');
        } else {
            alert('Login failed!');
        }
    };

    const handleCreateCourse = (name, id) => {
        setCourses([...courses, { courseName: name, courseId: parseInt(id), teacherName: currentUser.name }]);
        setTeachers(teachers.map(t => t.email === currentUser.email ? { ...t, myCourseIds: [...t.myCourseIds, parseInt(id)] } : t));
        alert(`Course ${name} (ID: ${id}) created!`);
    };

    const handleCreateAssignment = (title, desc, due, courseId) => {
        const courseExists = courses.find(c => c.courseId === parseInt(courseId));
        if (!courseExists) {
            alert('Course ID not found!');
            return;
        }
        setAssignments([...assignments, { assignmentId: nextAssignmentId, title, description: desc, dueDate: due, courseId: parseInt(courseId), teacherName: currentUser.name }]);
        setNextAssignmentId(nextAssignmentId + 1);
        alert(`Assignment created with ID ${nextAssignmentId}`);
    };

    const handleCreateAnnouncement = (title, message, courseId) => {
        const courseExists = courses.find(c => c.courseId === parseInt(courseId));
        if (!courseExists) {
            alert('Course ID not found!');
            return;
        }
        setAnnouncements([...announcements, { announcementId: nextAnnouncementId, title, message, courseId: parseInt(courseId) }]);
        setNextAnnouncementId(nextAnnouncementId + 1);
        alert(`Announcement posted (ID ${nextAnnouncementId})`);
    };

    const handleGradeSubmission = (submissionId, grade, feedback) => {
        const submissionExists = submissions.find(s => s.submissionId === parseInt(submissionId));
        if (!submissionExists) {
            alert('Submission ID not found!');
            return;
        }
        setSubmissions(submissions.map(s => s.submissionId === parseInt(submissionId) ? { ...s, grade: parseInt(grade), feedback } : s));
        alert(`Graded submission ${submissionId}`);
    };

    const handleEnrollCourse = (courseId) => {
        const courseExists = courses.find(c => c.courseId === parseInt(courseId));
        if (!courseExists) {
            alert('Course ID not found!');
            return;
        }
        setStudents(students.map(s => s.email === currentUser.email ? { ...s, enrolledCourseIds: [...s.enrolledCourseIds, parseInt(courseId)] } : s));
        setCurrentUser({ ...currentUser, enrolledCourseIds: [...currentUser.enrolledCourseIds, parseInt(courseId)] });
        alert(`Enrolled in course ${courseId}`);
    };

    const handleSubmitAssignment = (assignmentId, filePath) => {
        const assignmentExists = assignments.find(a => a.assignmentId === parseInt(assignmentId) && currentUser.enrolledCourseIds.includes(a.courseId));
        if (!assignmentExists) {
            alert('Assignment ID not found or not accessible!');
            return;
        }
        setSubmissions([...submissions, { submissionId: nextSubmissionId, assignmentId: parseInt(assignmentId), studentId: currentUser.stId, grade: -1, feedback: '', filePath }]);
        setNextSubmissionId(nextSubmissionId + 1);
        alert(`Submission added with ID ${nextSubmissionId}`);
    };

    const Home = () => (
        <div className="flex flex-col items-center justify-center min-h-screen bg-gray-100">
            <h1 className="text-4xl font-bold mb-8">Welcome to E-ClassRoom</h1>
            <div className="space-x-4">
                <button onClick={() => setUserType('teacher')} className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Teacher</button>
                <button onClick={() => setUserType('student')} className="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">Student</button>
                <button onClick={() => alert('Exiting E-ClassRoom. Bye!')} className="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">Exit</button>
            </div>
        </div>
    );

    const RegisterForm = ({ type, onRegister }) => {
        const [name, setName] = useState('');
        const [email, setEmail] = useState('');
        const [password, setPassword] = useState('');
        const [id, setId] = useState('');

        const handleSubmit = () => {
            if (type === 'teacher') {
                onRegister(name, email, password);
            } else {
                onRegister(name, email, password, id);
            }
            setName('');
            setEmail('');
            setPassword('');
            setId('');
        };

        return (
            <div className="flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4">
                <h2 className="text-2xl font-bold mb-4">{type === 'teacher' ? 'Teacher' : 'Student'} Registration</h2>
                <input type="text" value={name} onChange={(e) => setName(e.target.value)} placeholder="Name" className="mb-2 p-2 border rounded" />
                <input type="email" value={email} onChange={(e) => setEmail(e.target.value)} placeholder="Email" className="mb-2 p-2 border rounded" />
                <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} placeholder="Password" className="mb-2 p-2 border rounded" />
                {type === 'student' && <input type="text" value={id} onChange={(e) => setId(e.target.value)} placeholder="Student ID" className="mb-2 p-2 border rounded" />}
                <button onClick={handleSubmit} className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Register</button>
                <button onClick={() => setUserType(null)} className="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
            </div>
        );
    };

    const LoginForm = ({ type, onLogin }) => {
        const [email, setEmail] = useState('');
        const [password, setPassword] = useState('');

        const handleSubmit = () => {
            onLogin(email, password);
            setEmail('');
            setPassword('');
        };

        return (
            <div className="flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4">
                <h2 className="text-2xl font-bold mb-4">{type === 'teacher' ? 'Teacher' : 'Student'} Login</h2>
                <input type="email" value={email} onChange={(e) => setEmail(e.target.value)} placeholder="Email" className="mb-2 p-2 border rounded" />
                <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} placeholder="Password" className="mb-2 p-2 border rounded" />
                <button onClick={handleSubmit} className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Login</button>
                <button onClick={() => setUserType(null)} className="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
            </div>
        );
    };

    const TeacherDashboard = () => {
        const [option, setOption] = useState(null);
        const [courseName, setCourseName] = useState('');
        const [courseId, setCourseId] = useState('');
        const [assignmentTitle, setAssignmentTitle] = useState('');
        const [assignmentDesc, setAssignmentDesc] = useState('');
        const [assignmentDue, setAssignmentDue] = useState('');
        const [assignmentCourseId, setAssignmentCourseId] = useState('');
        const [announcementTitle, setAnnouncementTitle] = useState('');
        const [announcementMessage, setAnnouncementMessage] = useState('');
        const [announcementCourseId, setAnnouncementCourseId] = useState('');
        const [submissionId, setSubmissionId] = useState('');
        const [grade, setGrade] = useState('');
        const [feedback, setFeedback] = useState('');

        const handleOption = (opt) => {
            setOption(opt);
            // Reset form fields
            setCourseName('');
            setCourseId('');
            setAssignmentTitle('');
            setAssignmentDesc('');
            setAssignmentDue('');
            setAssignmentCourseId('');
            setAnnouncementTitle('');
            setAnnouncementMessage('');
            setAnnouncementCourseId('');
            setSubmissionId('');
            setGrade('');
            setFeedback('');
        };

        return (
            <div className="min-h-screen bg-gray-100 p-4">
                <h2 className="text-2xl font-bold mb-4">Teacher Dashboard</h2>
                {!option ? (
                    <div className="space-y-2">
                        <button onClick={() => handleOption(1)} className="w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Create Course</button>
                        <button onClick={() => handleOption(2)} className="w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Create Assignment</button>
                        <button onClick={() => handleOption(3)} className="w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Share Announcement</button>
                        <button onClick={() => handleOption(4)} className="w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Grade Submission</button>
                        <button onClick={() => handleOption(5)} className="w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">View Submissions</button>
                        <button onClick={() => handleOption(6)} className="w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">View My Account</button>
                        <button onClick={() => handleOption(7)} className="w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">View Courses</button>
                        <button onClick={() => setCurrentUser(null)} className="w-full px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">Logout</button>
                    </div>
                ) : option === 1 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">Create Course</h3>
                        <input type="text" value={courseName} onChange={(e) => setCourseName(e.target.value)} placeholder="Course Name" className="mb-2 p-2 border rounded w-full" />
                        <input type="number" value={courseId} onChange={(e) => setCourseId(e.target.value)} placeholder="Course ID" className="mb-2 p-2 border rounded w-full" />
                        <button onClick={() => { handleCreateCourse(courseName, courseId); setOption(null); }} className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Create</button>
                        <button onClick={() => setOption(null)} className="ml-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : option === 2 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">Create Assignment</h3>
                        <input type="number" value={assignmentCourseId} onChange={(e) => setAssignmentCourseId(e.target.value)} placeholder="Course ID" className="mb-2 p-2 border rounded w-full" />
                        <input type="text" value={assignmentTitle} onChange={(e) => setAssignmentTitle(e.target.value)} placeholder="Assignment Title" className="mb-2 p-2 border rounded w-full" />
                        <input type="text" value={assignmentDesc} onChange={(e) => setAssignmentDesc(e.target.value)} placeholder="Description" className="mb-2 p-2 border rounded w-full" />
                        <input type="text" value={assignmentDue} onChange={(e) => setAssignmentDue(e.target.value)} placeholder="Due Date" className="mb-2 p-2 border rounded w-full" />
                        <button onClick={() => { handleCreateAssignment(assignmentTitle, assignmentDesc, assignmentDue, assignmentCourseId); setOption(null); }} className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Create</button>
                        <button onClick={() => setOption(null)} className="ml-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : option === 3 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">Share Announcement</h3>
                        <input type="number" value={announcementCourseId} onChange={(e) => setAnnouncementCourseId(e.target.value)} placeholder="Course ID" className="mb-2 p-2 border rounded w-full" />
                        <input type="text" value={announcementTitle} onChange={(e) => setAnnouncementTitle(e.target.value)} placeholder="Announcement Title" className="mb-2 p-2 border rounded w-full" />
                        <input type="text" value={announcementMessage} onChange={(e) => setAnnouncementMessage(e.target.value)} placeholder="Message" className="mb-2 p-2 border rounded w-full" />
                        <button onClick={() => { handleCreateAnnouncement(announcementTitle, announcementMessage, announcementCourseId); setOption(null); }} className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Post</button>
                        <button onClick={() => setOption(null)} className="ml-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : option === 4 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">Grade Submission</h3>
                        {submissions.length === 0 ? <p>No submissions present.</p> : (
                            <div>
                                {submissions.map(sub => (
                                    <div key={sub.submissionId} className="mb-2 p-2 border rounded">
                                        <p>Submission ID: {sub.submissionId}</p>
                                        <p>Assignment ID: {sub.assignmentId}</p>
                                        <p>Student ID: {sub.studentId}</p>
                                        <p>File: {sub.filePath}</p>
                                        <p>{sub.grade >= 0 ? `Grade: ${sub.grade}, Feedback: ${sub.feedback}` : 'Not graded yet.'}</p>
                                    </div>
                                ))}
                                <input type="number" value={submissionId} onChange={(e) => setSubmissionId(e.target.value)} placeholder="Submission ID" className="mb-2 p-2 border rounded w-full" />
                                <input type="number" value={grade} onChange={(e) => setGrade(e.target.value)} placeholder="Grade" className="mb-2 p-2 border rounded w-full" />
                                <input type="text" value={feedback} onChange={(e) => setFeedback(e.target.value)} placeholder="Feedback" className="mb-2 p-2 border rounded w-full" />
                                <button onClick={() => { handleGradeSubmission(submissionId, grade, feedback); setOption(null); }} className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Grade</button>
                            </div>
                        )}
                        <button onClick={() => setOption(null)} className="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : option === 5 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">View Submissions</h3>
                        {submissions.length === 0 ? <p>No submissions present.</p> : (
                            submissions.filter(sub => assignments.find(a => a.assignmentId === sub.assignmentId && a.teacherName === currentUser.name)).map(sub => (
                                <div key={sub.submissionId} className="mb-2 p-2 border rounded">
                                    <p>Submission ID: {sub.submissionId}</p>
                                    <p>Assignment ID: {sub.assignmentId}</p>
                                    <p>Student ID: {sub.studentId}</p>
                                    <p>File: {sub.filePath}</p>
                                    <p>{sub.grade >= 0 ? `Grade: ${sub.grade}, Feedback: ${sub.feedback}` : 'Not graded yet.'}</p>
                                </div>
                            ))
                        )}
                        <button onClick={() => setOption(null)} className="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : option === 6 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">My Account</h3>
                        <p>Name: {currentUser.name}</p>
                        <p>Email: {currentUser.email}</p>
                        <button onClick={() => setOption(null)} className="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : option === 7 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">My Courses</h3>
                        {courses.filter(c => c.teacherName === currentUser.name).map(c => (
                            <div key={c.courseId} className="mb-2 p-2 border rounded">
                                <p>Name: {c.courseName}</p>
                                <p>ID: {c.courseId}</p>
                            </div>
                        ))}
                        <button onClick={() => setOption(null)} className="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : null}
            </div>
        );
    };

    const StudentDashboard = () => {
        const [option, setOption] = useState(null);
        const [courseId, setCourseId] = useState('');
        const [assignmentId, setAssignmentId] = useState('');
        const [filePath, setFilePath] = useState('');

        const handleOption = (opt) => {
            setOption(opt);
            setCourseId('');
            setAssignmentId('');
            setFilePath('');
        };

        return (
            <div className="min-h-screen bg-gray-100 p-4">
                <h2 className="text-2xl font-bold mb-4">Student Dashboard</h2>
                {!option ? (
                    <div className="space-y-2">
                        <button onClick={() => handleOption(1)} className="w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">Join Course</button>
                        <button onClick={() => handleOption(2)} className="w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">View Assignments</button>
                        <button onClick={() => handleOption(3)} className="w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">Submit Assignment</button>
                        <button onClick={() => handleOption(4)} className="w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">View Announcements</button>
                        <button onClick={() => handleOption(5)} className="w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">View Grades</button>
                        <button onClick={() => handleOption(6)} className="w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">View My Account</button>
                        <button onClick={() => setCurrentUser(null)} className="w-full px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">Logout</button>
                    </div>
                ) : option === 1 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">Join Course</h3>
                        {courses.length === 0 ? <p>No courses available.</p> : (
                            <div>
                                {courses.map(c => (
                                    <div key={c.courseId} className="mb-2 p-2 border rounded">
                                        <p>Course: {c.courseName} (ID: {c.courseId})</p>
                                    </div>
                                ))}
                                <input type="number" value={courseId} onChange={(e) => setCourseId(e.target.value)} placeholder="Course ID" className="mb-2 p-2 border rounded w-full" />
                                <button onClick={() => { handleEnrollCourse(courseId); setOption(null); }} className="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">Enroll</button>
                            </div>
                        )}
                        <button onClick={() => setOption(null)} className="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : option === 2 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">View Assignments</h3>
                        {currentUser.enrolledCourseIds.length === 0 ? <p>You are not enrolled in any course.</p> : (
                            assignments.filter(a => currentUser.enrolledCourseIds.includes(a.courseId)).map(a => (
                                <div key={a.assignmentId} className="mb-2 p-2 border rounded">
                                    <p>Assignment ID: {a.assignmentId}</p>
                                    <p>Title: {a.title}</p>
                                    <p>Description: {a.description}</p>
                                    <p>Due: {a.dueDate}</p>
                                    <p>Course ID: {a.courseId}</p>
                                    <p>By: {a.teacherName}</p>
                                </div>
                            ))
                        )}
                        <button onClick={() => setOption(null)} className="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : option === 3 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">Submit Assignment</h3>
                        {currentUser.enrolledCourseIds.length === 0 ? <p>You are not enrolled in any course.</p> : (
                            <div>
                                <p>Your enrolled course IDs: {currentUser.enrolledCourseIds.join(', ')}</p>
                                {assignments.filter(a => currentUser.enrolledCourseIds.includes(a.courseId)).map(a => (
                                    <div key={a.assignmentId} className="mb-2 p-2 border rounded">
                                        <p>Assignment ID: {a.assignmentId}</p>
                                        <p>Title: {a.title}</p>
                                        <p>Description: {a.description}</p>
                                        <p>Due: {a.dueDate}</p>
                                        <p>Course ID: {a.courseId}</p>
                                        <p>By: {a.teacherName}</p>
                                    </div>
                                ))}
                                <input type="number" value={assignmentId} onChange={(e) => setAssignmentId(e.target.value)} placeholder="Assignment ID" className="mb-2 p-2 border rounded w-full" />
                                <input type="text" value={filePath} onChange={(e) => setFilePath(e.target.value)} placeholder="File Path / Description" className="mb-2 p-2 border rounded w-full" />
                                <button onClick={() => { handleSubmitAssignment(assignmentId, filePath); setOption(null); }} className="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">Submit</button>
                            </div>
                        )}
                        <button onClick={() => setOption(null)} className="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : option === 4 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">View Announcements</h3>
                        {currentUser.enrolledCourseIds.length === 0 ? <p>You are not enrolled in any course.</p> : (
                            announcements.filter(an => currentUser.enrolledCourseIds.includes(an.courseId)).map(an => (
                                <div key={an.announcementId} className="mb-2 p-2 border rounded">
                                    <p>Announcement ID: {an.announcementId}</p>
                                    <p>Title: {an.title}</p>
                                    <p>Message: {an.message}</p>
                                    <p>Course ID: {an.courseId}</p>
                                </div>
                            ))
                        )}
                        <button onClick={() => setOption(null)} className="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : option === 5 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">View Grades</h3>
                        {submissions.filter(s => s.studentId === currentUser.stId).length === 0 ? <p>No submissions found for you.</p> : (
                            submissions.filter(s => s.studentId === currentUser.stId).map(s => (
                                <div key={s.submissionId} className="mb-2 p-2 border rounded">
                                    <p>Submission ID: {s.submissionId}</p>
                                    <p>Assignment ID: {s.assignmentId}</p>
                                    <p>Student ID: {s.studentId}</p>
                                    <p>File: {s.filePath}</p>
                                    <p>{s.grade >= 0 ? `Grade: ${s.grade}, Feedback: ${s.feedback}` : 'Not graded yet.'}</p>
                                </div>
                            ))
                        )}
                        <button onClick={() => setOption(null)} className="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : option === 6 ? (
                    <div>
                        <h3 className="text-xl font-semibold mb-2">My Account</h3>
                        <p>Name: {currentUser.name}</p>
                        <p>Email: {currentUser.email}</p>
                        <p>Student ID: {currentUser.stId}</p>
                        <button onClick={() => setOption(null)} className="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
                    </div>
                ) : null}
            </div>
        );
    };

    const UserTypeSelection = () => (
        <div className="flex flex-col items-center justify-center min-h-screen bg-gray-100">
            <h2 className="text-2xl font-bold mb-4">{userType === 'teacher' ? 'Teacher' : 'Student'} Menu</h2>
            <div className="space-y-2">
                <button onClick={() => setUserType(`${userType}_register`)} className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Register</button>
                <button onClick={() => setUserType(`${userType}_login`)} className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Login</button>
                <button onClick={() => setUserType(null)} className="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Back</button>
            </div>
        </div>
    );

    return (
        <div>
            {!userType ? <Home /> :
             userType === 'teacher' || userType === 'student' ? <UserTypeSelection /> :
             userType === 'teacher_register' ? <RegisterForm type="teacher" onRegister={handleRegisterTeacher} /> :
             userType === 'student_register' ? <RegisterForm type="student" onRegister={handleRegisterStudent} /> :
             userType === 'teacher_login' ? <LoginForm type="teacher" onLogin={handleLoginTeacher} /> :
             userType === 'student_login' ? <LoginForm type="student" onLogin={handleLoginStudent} /> :
             currentUser?.type === 'teacher' ? <TeacherDashboard /> :
             currentUser?.type === 'student' ? <StudentDashboard /> : null}
        </div>
    );
};

ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>